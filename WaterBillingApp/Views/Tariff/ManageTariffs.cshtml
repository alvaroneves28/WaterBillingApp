@model IEnumerable<WaterBillingApp.Data.Entities.TariffBracket>

@{
    // Set the page title to "Manage Tariffs"
    ViewData["Title"] = "Manage Tariffs";
}

<h1>@ViewData["Title"]</h1>

<div class="mb-3">
    @* Button to navigate to the Create Tariff page *@
    <a asp-action="Create" class="btn btn-success">
        @* Bootstrap icon for plus and some margin *@
        <i class="bi bi-plus-lg me-1"></i> Add New Tariff
    </a>
</div>

<table class="table table-striped table-hover align-middle">
    <thead class="table-primary">
        <tr>
            <th>Minimum Volume (m³)</th>
            <th>Maximum Volume (m³)</th>
            <th>Price per m³ (€)</th>
            <th style="width: 140px;">Actions</th> @* Fixed width for action buttons column *@
        </tr>
    </thead>
    <tbody>
        @* Loop through each tariff in the model collection *@
        @foreach (var tariff in Model)
        {
        <tr>
            @* Show the minimum volume value *@
            <td>@tariff.MinVolume</td>

            @* 
                   Show the maximum volume if it has a value,
                   otherwise display "No limit" in italics.
                   Use raw HTML string so <em> renders properly.
                *@
            <td>
                @Html.Raw(tariff.MaxVolume.HasValue
                                ? tariff.MaxVolume.Value.ToString()
                                : "<em>No limit</em>")
            </td>

            @* Format price as currency with 2 decimal places *@
            <td>@string.Format("{0:C2}", tariff.PricePerCubicMeter)</td>

            <td>
                @* Edit button linking to the Edit action with tariff ID *@
                <a asp-action="Edit" asp-route-id="@tariff.Id"
                   class="btn btn-sm btn-warning me-1" title="Edit tariff">
                    <i class="bi bi-pencil-square"></i>
                </a>

                @* Delete button linking to the Delete action with tariff ID
                       Includes JavaScript confirmation prompt to prevent accidental deletes *@
                <a asp-action="Delete" asp-route-id="@tariff.Id"
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this tariff?');"
                   title="Delete tariff">
                    <i class="bi bi-trash"></i>
                </a>
            </td>
        </tr>
                }
    </tbody>
</table>
