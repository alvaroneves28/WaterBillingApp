@model WaterBillingApp.Models.MetersDashboardViewModel

@{
    // Set the page title
    ViewData["Title"] = "Manage Meters";
}

<!-- Button to navigate to the invoices page -->
<a asp-controller="Invoice" asp-action="Index" class="btn btn-info mb-3">View Invoices</a>

<!-- Main page heading -->
<h1>@ViewData["Title"]</h1>

<!-- Display status message from TempData if available -->
@if (TempData["StatusMessage"] != null)
{
    <div class="alert alert-info">@TempData["StatusMessage"]</div>
}

<!-- Display new meter requests if any -->
@if (Model.PendingMeterRequests != null && Model.PendingMeterRequests.Any())
{
    <!-- Render the partial view _NewMeterRequests passing the pending requests -->
    @await Html.PartialAsync("_NewMeterRequests", Model.PendingMeterRequests)
}
else
{
    <!-- Message shown when there are no new meter requests -->
    <p class="text-muted">There are no new meter requests.</p>
}

<!-- Display meters pending approval if any -->
@if (Model.PendingMeters != null && Model.PendingMeters.Any())
{
    <!-- Render the partial view _PendingMeters passing the pending meters -->
    @await Html.PartialAsync("_PendingMeters", Model.PendingMeters)
}
else
{
    <!-- Message shown when there are no meters awaiting approval -->
    <p class="text-muted">There are no meters awaiting approval.</p>
}

<!-- Display active meters if any -->
@if (Model.ActiveMeters != null && Model.ActiveMeters.Any())
{
    <!-- Render the partial view _ActiveMeters passing the active meters -->
    @await Html.PartialAsync("_ActiveMeters", Model.ActiveMeters)
}
else
{
    <!-- Message shown when there are no active meters -->
    <p class="text-muted">There are no active meters to show.</p>
}
